<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Building Edge Sensors and Actuators</h2>
        <ol class="breadcrumb">
            <li>
                <a href="index.html">Home</a>
            </li>
            <li>
                <a>Labs</a>
            </li>
            <li class="active">
                <strong>Edge Sensors and Actuators with JavaScript</strong>
            </li>
        </ol>
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight" ng-controller="CodeEditorCtrl">
    <div class="row">
        <div class="col-lg-12">

            <!-- Objectives -->
            <div ibox title="Objectives">
                <div content-block name="read-objectives" message="Read the Objectives">
                    <h2 class="labHidden">Read the Objectives</h2>
                    <labels arduino windows apple linux/>
                    <p>To learn how to build stand alone IoT devices with Arduino* 101. Learn to use sensors and actuators to gather and respond to data. The devices built during this lab will be extended in later labs to send their data to the Intel&reg; IoT
                        Gateway and to the cloud</p>

                    <p>By the end of this module, you should be able to:</p>

                    <ul>
                        <li>Connect Grove Kit sensors and actuators to your Arduino* 101.</li>
                        <li>Use the JavaScript UPM libraries to control actuators and read data from sensors.</li>
                        <li>Create a NodeJS server to configure and analyze the Grove components as "edge devices" — devices triggered over a network instead of directly on the board.</li>
                    </ul>
                </div>
            </div>

            <!-- Three Methods of Deploying Code to the Intel Edison -->
            <!-- <div ibox title="Three Methods of Deploying Code to the Intel Edison">

        <div content-block name="build-deploy-code-with-SSH" message="You can use multiple methods of deploying code to Intel IoT products">
<h2 class="labHidden">You can use multiple methods of deploying code to Intel IoT products</h2>
          <p>There are many ways to transfer source code to the Intel Edison or Intel IoT Gatway. The simplest is to use SSH and secure copy or secure FTP to transfer files. Many IDEs also have the ability to transfer files over SSH.</p>

          <p>In this section, we'll walk through transfering a software project to the Intel Edison using a couple of different methods.</p>

          <ol>
            <li>Write your source code in any editor and transfer it using secure copy (SCP)</li>
            <li>Use the Intel&reg; XDK to write and deploy your code</li>
            <li>Use the Atom Editor and the Remote Edit package to write and deploy code</li>
          </ol>

          <div class="alert alert-info">
            <p>If you deploy your NodeJS application to the directory /node_app_slot it will autostart at device boot time.</p>
          </div>

        </div>
        <div content-block name="build-deploy-with-scp" message="Use SCP to deploy code to the Intel Edison">
<h2 class="labHidden">Use SCP to deploy code to the Intel Edison</h2>
          <p>The step to use SCP are different on Windows based machine then on MacOSX or Linux based machines.</p>

          <p>If you are on Windows:</p>
          <ul>
            <li>Go to the <a href="https://winscp.net/eng/download.php">WinSCP site</a>.</li>
            <li>Launch WinSCP and configure the remote host as <code>192.168.1.1</code> with your username and password</li>
            <li>You can now drag and drop your source code on to the Intel Edison or Intel&reg; IoT Gateway</li>
          </ul>

          <p>If you on MacOSX or Linux, you can secure copy files from the command line. Assuming the IP address of your Intel Edison is 192.168.1.100, to move files from your home directory to the /node_app_slot directory on the Intel Edison type:</p>
          <pre><code># scp -rf ~/labs/temperature-sensor/ root@192.168.1.100:/node_app_slot</code></pre>
        </div>

        <div content-block name="build-use-atom-to-deploy" message="You can use Atom to deploy software to the Intel Edison or Intel&reg; IoT Gateway" image-link="./views/labs/sensors-javascript/images/atom.png">
<h2 class="labHidden">You can use Atom to deploy software to the Intel Edison or Intel&reg; IoT Gateway</h2>
<img class="labHidden" src="./views/labs/sensors-javascript/images/atom.png"></img>

          <ol>
            <li>Go to the <a href="https://atom.io/">Atom Editor Homepage</a> and download the Atom Editor.</li>
            <li>Go the menu bar in Atom and go to <code>Preferences</code>.</li>
            <li>Click on <code>Install</code> and search for <code>Remote-Edit</code></li>
            <li>Go to the menu bar <code>Packages -> Remote Edit -> Add New Host (sftp)</code></li>
            <li>Add the IP address of the Intel Edison or the Intel&reg; IoT Gateway</li>
            <li>Now if you go to <code>Packages -> Remote Edit -> Browse Hosts</code> you will be able to browse and edit the files on the remote host.</li>
          </ol>
        </div>
      </div> -->


            <div ibox title="Deploy sample application with the Intel&reg; XDK IoT Edition">

                <div content-block name="download-xdk-intro" message="Download the Intel&reg; XDK Introduction">
                    <h2 class="labHidden">Download the Intel&reg; XDK Introduction</h2>
                    <p>Go to the <a href="https://software.intel.com/en-us/iot/software/ide" target="_blank">Intel&reg; IoT Developer Kit Integrated Development Environments Download Page</a> and get download a copy of the Intel&reg; XDK IoT Edition.</p>
                </div>

                <div content-block name="read-xdk-intro" message="Read the Intel&reg; XDK Introduction" image-link="./views/labs/sensors-javascript/images/xdk-splash.png">
                    <h2 class="labHidden">Read the Intel&reg; XDK Introduction</h2>
                    <p><img class="labHidden" alt="XDK Splash" data-fid="503891" src="https://software.intel.com/sites/default/files/managed/35/a6/xdk-splash.png" title="XDK Splash" typeof="foaf:Image"></p>


                    <p class="subtitle">This initial lesson will enable you to deploy a JavaScript program to the Arduino* 101 using any computer OS platform</p>

                    <p>
                        Create and run a Hello Word project (blinking the onboard LED) on your Intel&reg; IoT board based on the "Onboard LED Blink" starter template.
                    </p>

                    <p>The <a href="https://software.intel.com/en-us/iot/downloads#ide" target="_blank">Intel&reg; XDK IoT Edition</a> lets you create and test applications on Intel&reg; IoT platforms. It uses NodeJS to communicate with all the GPIOs, libraries, and packages. The
                        IoT edition also provides NodeJS templates for creating new applications that interact with sensors and actuators, enabling you to get a quick start on developing for the Internet of Things.</p>
                </div>

                <div content-block name="launch-xdk" message="Launch and skip the sign in to the Intel&reg; XDK" image-link="./views/labs/sensors-javascript/images/later.png">
                    <p>Begin by launching the Intel&reg; XDK</p>

                    <div class="alert alert-info">
                        Note: If you are in an Intel CIOT Workshop, please select the <b>later</b> button. However, to continue using the Intel&reg; XDK, you must sign up for an Intel&reg; XDK account or log in to a pre-existing account within 48 hours.
                    </div>
                </div>

                <div content-block name="xdk-signup" message="Create an account and sign in to the Intel&reg; XDK" image-link="./views/labs/sensors-javascript/images/image_1.png">
                    <p>Follow the on-screen instructions to sign up for an Intel&reg; XDK account, or log in to a pre-existing account.</p>
                    <div class="alert alert-info">
                        If you clicked the <b>later</b> on the sign in page then you will not see this step.</div>
                </div>

                <div content-block name="disable-node-red" message="Disable Node-Red service">
                  <p><b>  Disable Node-Red service running on your Gateway</b></p>
                  <ul>
                    <li><p>In previous lab we were executing few Node-Red flows which made use of system resources like (sensors, GPIOs, I2C etc.). Since in this lab we will be using the same resources to avoid any contention we will disable the node-red service during this exercise</li></p>
                    <li><p>Open a terminal to your Gateway and give following command:</li></p>
                    <pre><code>systemctl stop node-red-experience</pre></code>
                    <li><p>Check that service has stopped</li></p>
                    <pre><code>systemctl status node-red-experience</pre></code>
                  </ul>
                </div>

                <div content-block name="click-on-templates" message="Click on Templates" image-link="./views/labs/sensors-javascript/images/image_2.png">
                    <h2 class="labHidden">Click on Templates</h2>
                    <p><img class="labHidden" alt="" data-fid="503894" src="https://software.intel.com/sites/default/files/managed/9b/da/image_2.png" typeof="foaf:Image"></p>

                    <p>Create a project</p>

                    <p>Under the "<strong>Internet of Things Embedded Application</strong>" option in the lefthand menu, select "<strong>Templates</strong>".</p>
                </div>

                <div content-block name="select-led-blink-template" message="Select the LED Blink Template" image-link="./views/labs/sensors-javascript/images/image_3.png">
                    <h2 class="labHidden">Select the LED Blink Template</h2>
                    <p><img class="labHidden" alt="" data-fid="503895" src="https://software.intel.com/sites/default/files/managed/49/28/image_3.png" typeof="foaf:Image"></p>

                    <p>A list of templates for developing Node.js applications will be shown. Select "<strong>Onboard LED Blink</strong>" template, then click "<strong>Continue</strong>".</p>
                </div>

                <div content-block name="create-project" message="Name and then Create the New Project" image-link="./views/labs/sensors-javascript/images/image_4.png">
                    <h2 class="labHidden">Name and then Create the New Project</h2>
                    <p><img class="labHidden" alt="" data-fid="503897" src="https://software.intel.com/sites/default/files/managed/cb/f7/image_4.png" typeof="foaf:Image"></p>

                    <p>Choose a directory for your project files, and enter a name for your project.</p>
                    <p>Click "<strong>Create</strong>" in the bottom right corner.</p>
                </div>

                <div content-block name="select-device" message="Select a target IoT device" image-link="./views/labs/sensors-javascript/images/image_6.png">

                  <p>The Intel&reg; XDK IoT Edition will automatically detect Intel&reg; IoT devices on your network and display them in the "IoT Device" drop down list.</p>

                  <p>In the bottom left corner of the Intel&reg; XDK, click the "<strong>IoT Device</strong>" drop down list which currently indicates "<strong>- Select a Device -</strong>".</p>

                  <p>Select your target Arduino* 101 from the list. If there are multiple devices, choose based on the device name and IP address.</p>

                </div>

                <div content-block name="manually-enter-ip-address" message="If needed you can manually enter the IP address of your Intel Edison" image-link="./views/labs/sensors-javascript/images/image09.png">
                    <h2 class="labHidden">If needed you can manually enter the IP address of your Intel Edison</h2>
                    <p><img class="labHidden" alt="" data-fid="503905" src="https://software.intel.com/sites/default/files/managed/c6/33/image09.png" typeof="foaf:Image"></p>

                    <div class="alert alert-warning">
                        <p><strong>Do not see your device in the "IoT Device" drop down list?</strong></p>
                        <p>From the "IoT Device" menu, instead choose "<strong>Add Manual Connection</strong>".</p>

                        <ul>
                            <li>For <strong>Address</strong>, enter the IP address of your Arduino* 101 Board that you saw in <span class="icon bookmark">Step 3: Login to your Arduino* 101</span>. e.g. 192.168.0.2</li>
                            <li>For <strong>Port</strong>, keep at the default "58888". </li>
                            <li>For <strong>User</strong> Name, use "root"</li>
                            <li>For <strong>Password</strong>, use the password you set up.</li>
                        </ul>
                        <p>Click "<strong>Connect</strong>".</p>
                    </div>
                </div>

                <div content-block name="establish-connection" message="Establish the connection to the Intel Edison and synchronize the clocks between your development system and your Intel Edison" image-link="./views/labs/sensors-javascript/images/image33.png">
                    <h2 class="labHidden">Establish the connection to the Intel Edison and synchronize the clocks between your development system and your Intel Edison</h2>
                    <p><img class="labHidden" alt="" data-fid="503907" src="https://software.intel.com/sites/default/files/managed/fe/8f/image33.png" typeof="foaf:Image"></p>

                    <p>
                        Sync your computer's time with the clock on the target board to avoid timing issues. Do this step any time you connect to a new target IoT device or the device has been powered off.
                    </p>
                </div>

                <div content-block name="know-the-toolbar" message="Get to know the Intel&reg; XDK Build toolbar." image-link="./views/labs/sensors-javascript/images/build.png">
                    <h2 class="labHidden">Get to know the Intel&reg; XDK Build toolbar.</h2>
                    <p><img class="labHidden" alt="" data-fid="503909" src="https://software.intel.com/sites/default/files/managed/6a/61/build.png" typeof="foaf:Image"></p>

                    <p>In the bottom toolbar, click the "<strong>Manage your daemon/IoT device</strong>" icon.</p>

                    <p>Select "<strong>sync PC time w/ clock on target device</strong>".</p>
                    <p>A message in the console log will appear to confirm the update.</p>
                </div>


                <div content-block name="modify-the-xdk-app" message="Modify LED blink code for NUC Gateway" image-link="./views/labs/sensors-javascript/images/led-xdk-NUC.png">
                  <li><p>The default LED blinky app does not have support for Arduino* 101 connected through NUC. We will make some minor changes to the code.</li></p>
                  <li><p>Open <b>cfg-app-platform.js</b> file and make below changes in the functions indicated in comments (also shown in figure) and save the file</li></p>
                  <ui-codemirror ui-codemirror-opts="editorOptions"><pre class="brush:jscript;">//Change in cfg.int = function()
case cfg.mraa.INTEL_DE3815:               // NUC
	io = opt.altPin ? io : 525 ;            // use alternate pin
	break ;                                 // GPIO pin 13 + 512 is Firmata offset

//Change in cfg.test = function()
case cfg.mraa.INTEL_GALILEO_GEN1:           // Gallileo Gen 1
case cfg.mraa.INTEL_GALILEO_GEN2:           // Gallileo Gen 2
case cfg.mraa.INTEL_EDISON_FAB_C:           // Edison
case cfg.mraa.INTEL_DE3815:                 // NUC Gateway
	checkNode = checkNodeVersion("4.0") ;
	checkMraa = checkMraaVersion("1.0.0") ;
                  </pre></ui-codemirror>
                </div>
                <div content-block name="build-the-xdk-app" message="Upload the application" image-link="./views/labs/sensors-javascript/images/image_10.png">
                    <h2 class="labHidden">Upload the application</h2>
                    <p><img class="labHidden" alt="" data-fid="503910" src="https://software.intel.com/sites/default/files/managed/16/d8/image_10.png" typeof="foaf:Image"></p>

                    <p>The Upload button will fetch all of the dependecies listed in the package.json file and it will install them on the device. Run it any time you create a new project, or add/remove Node modules from an existing project.</p>

                    <ol>
                        <li>
                            <p>In the bottom toolbar, click the "<strong>Upload</strong>" icon.</p>
                        </li>

                        <li>
                            <p>Wait a moment for the packages to download on the device and install. You will see a confirmation message in the console log.</p>
                            <figure>
                                <figcaption>Click the "Toggle console window" icon if you see any messages and the console is not already expanded.</figcaption>
                            </figure>
                        </li>

                    </ol>
                </div>

                <div content-block name="build-the-xdk-app" message="Run the application" image-link="./views/labs/sensors-javascript/images/run.png">
                    <h2 class="labHidden">Run the application</h2>
                    <p><img class="labHidden" alt="run" data-fid="503911" src="https://software.intel.com/sites/default/files/managed/91/1d/run.png" title="run" typeof="foaf:Image"></li>


                    <p>
                        Once upload is finished to the IoT device run the application. Remember that every time you make changes to files and you want to see the changes: (1) save the file, (2) upload, (3) run.
                    </p>

                    <ol>
                        <li>
                            <p>In the bottom toolbar, click the "<strong>Run</strong>"<strong> icon</strong> to run the project.</p>
                        </li>

                        <li>
                            <p>Keep an eye on the console log bar for any runtime errors.</p>
                            <p>Click the "Toggle console window" icon if you see any messages and the console is not already expanded.</p>
                        </li>
                    </ol>
                </div>

                <div content-block name="blink-the-light" message="Congratulations, you just ran your first Intel&reg; XDK application!" image-link="./views/labs/sensors-javascript/images/image_arduino_led.png">
                    <h2 class="labHidden">Congratulations, you just ran your first Intel&reg; XDK application!</h2>
                    <p><img class="labHidden" alt="" data-fid="503913" src="https://software.intel.com/sites/default/files/managed/61/94/image_arduino_led.png" typeof="foaf:Image"></p>

                    <p>Look at your Intel&reg; IoT board for a blinking light.</p>
                    <p> The LED is located near the center of the board as shown in the figure</p>

                    <p><strong>Congratulations, you just ran your first Intel&reg; XDK application!</strong></p>

                    <div id="next-steps" class="callout done">
                        <p>You should now be able to build and deploy projects using the Intel&reg; XDK. An LED should be blinking on your Intel&reg; IoT board.</p>
                    </div>

                </div>
            </div>

            <div ibox title="Exercise 1: Temperature Sensor and LCD">
                <div content-block name="read-xdk-intro" message="Plug in the Grove shield, temperature sensor and the LCD" image-link="./views/labs/sensors-javascript/images/temperature-sensors.jpg">
                    <h2 class="labHidden">Plug in the Grove shield, temperature sensor and the LCD</h2>
                    <p><img class="labHidden" alt="temperature sensor" data-fid="503915" src="https://software.intel.com/sites/default/files/managed/21/f9/temperature-sensors.jpg" title="temperature sensor" typeof="foaf:Image"></p>


                    <p>Connect the Temperature sensor (Analog) and LCD display (I2C) to your Arduino* 101. Write code for NodeJS using the Intel&reg; XDK IoT Edition. Measure temperature in Celsius using upm library, convert it to Fahrenheit, then display it
                        on the LCD.</p>

                    <ol>
                        <li>
                            <p>Install the Grove Base Shield onto the Arduino* 101 Arduino expansion board.</p>
                        </li>
                        <li>
                            <p>Connect <strong>Grove Temperature Sensor</strong> to analog pin <strong>A1</strong> of the Grove Base Shield.</p>
                        </li>
                        <li>
                            <p>Connect <strong>Grove LCD</strong> display to one of the <strong>I2C</strong> pins.</p>
                        </li>
                    </ol>

                </div>

                <div content-block name="read-xdk-intro" message="Start a new project in the Intel&reg; XDK using a blank template." image-link="./views/labs/sensors-javascript/images/new-project.png">
                    <h2 class="labHidden">Start a new project in the Intel&reg; XDK using a blank template.</h2>
                    <p><img class="labHidden" alt="new project" data-fid="503916" src="https://software.intel.com/sites/default/files/managed/e1/57/new-project.png" title="new project" typeof="foaf:Image"></p>

                    <ol>
                        <li>
                            <p>Start a new project in the Intel&reg; XDK using a blank template.</p>
                        </li>
                        <li>
                            <p>If you have an Intel&reg; XDK project already open, click on the projects drop down menu in the upper left hand corner, then select <strong>New Project</strong>.</p>
                        </li>
                    </ol>

                    <div class="alert alert-info">
                        <p>This temperature project will be used in all the later labs to supply a steady stream of data.</p>
                    </div>
                </div>

                <div content-block name="read-xdk-intro" message="Select the Blank Template" image-link="./views/labs/sensors-javascript/images/blank_template.png">
                    <h2 class="labHidden">Select the Blank Template</h2>
                    <p><img class="labHidden" alt="blank template" data-fid="503917" src="https://software.intel.com/sites/default/files/managed/32/d4/blank_template.png" title="blank template" typeof="foaf:Image"></p>

                    <p>Choose <strong>Blank Template</strong> from the list of templates, then click <strong>Continue</strong>.</p>


                    <p>The Intel&reg; XDK will create and open <span class="icon file">main.js</span> for you.</p>
                </div>

                <div content-block name="read-xdk-intro" message="Write the Code to Read the Temperature Sensor.">
                    <h2 class="labHidden">Write the Code to Read the Temperature Sensor.</h2>
                    <h5>Read the temperature sensor</h5>

                    <p>Update <span class="icon file">main.js</span> to read the temperature sensor on program start up and log it to the console.</p>

                    <ol>

                        <li>
                            <p>Create an offset var of 512. This offset is required since we use Firmata to connect Arduino* 101 with NUC gateway which needs this conversion for all the I/O pins</p>
                            <p><code>var OFFSET = 512;</code></p>
                        </li>

                        <li>
                            <p>Include the JS UPM library for the basic Grove sensors.</p>
                            <p><code>var groveSensor = require('jsupm_grove');</code></p>
                        </li>

                        <li>
                            <p>Instantiate a <code>GroveTemp</code> Grove Sensor on analog pin 1 and add the offset. Here 0.66 is a scaling factor, the grove temp sensor is designed to read value at 3.3V however since we are using 5.5V we need this conversion factor</p>
                            <p><code>var temp = new groveSensor.GroveTemp(1+OFFSET, 0.66);</code></p>
                        </li>

                        <li>
                            <p>Read the value of the <code>GroveTemp</code> object you just created.</p>
                            <p><code>var celsius = temp.value();</code></p>
                        </li>

                        <li>
                            <p>If desired, convert the Celsius value to Fahrenheit using the standard conversion formula.</p>
                            <p><code>var fahrenheit = Math.round(celsius * 9.0/5.0 + 32.0);</code></p>
                        </li>

                        <li>
                            <p>Finally, output the value of the temperature sensor.</p>
                            <p><code>console.log(celsius + "° Celsius, or " + fahrenheit + "° Fahrenheit");</code></p>
                        </li>

                        <li>
                            <p>The final code should look like this:</p>

                            <ui-codemirror ui-codemirror-opts="editorOptions"><pre class="brush:jscript;">var OFFSET = 512;
var groveSensor = require('jsupm_grove');
var temp = new groveSensor.GroveTemp(1+OFFSET, 0.66);
var celsius = temp.value();
var fahrenheit = Math.round(celsius * 9.0 / 5.0 + 32.0);
console.log(celsius + "° Celsius, or " + fahrenheit + "° Fahrenheit");  </li>

                        <li>
                            <p>Make sure your changes to <span class="icon file">main.js</span> have been saved and use the buttons at the bottom of the Intel&reg; XDK to:
                                <br> (1) Upload it to Arduino* 101, and
                                <br> (2) Run the application.</p>
                        </li>

                        <li>
                            <p>If successful, you should see the temperature output in the Intel&reg; XDK console.</p>
                        </li>
                    </ol>
                    <div class="alert alert-warning">
                      <p>Sometimes a single reading from the temperature sensor might be garbled, ignore this. Once we write a loop to read data continuously from sensor we should not get this garbled value</p>
                    </div>
                </div>

                <div content-block name="repeat-sensor-reading" message="Make the sensor reading repeat once per second">
                    <h2 class="labHidden">Make the sensor reading repeat once per second</h2>
                    <p>Currently the temperature sensor is only read once on application start. Add a JavaScript <code>setInterval</code> to regularly poll the sensor every second (1000 miliseconds).</p>
                    <p>If you are not familiar with JavaScript, the format should look similar to this:</p>
                    <ui-codemirror ui-codemirror-opts="editorOptions"><pre class="brush:jscript;">function monitor() {
    setInterval(function() {
        // code to repeat goes here
    }, 1000);
}
monitor();</pre></ui-codemirror>
                </div>


                <div content-block name="repeat-sensor-reading" message="Bring the SetInterval and Sensor Reading code together.">
                    <h2 class="labHidden">Bring the SetInterval and Sensor Reading code together.</h2>
                    <ol>

                        <li>
                            <p>Try incorporating the <code>setInterval</code> callback with the code you wrote in <span class="icon bookmark">Read the temperature sensor</span> before scrolling down for the solution.</p>
                        </li>

                        <li>
                            <p>
                                With polling, the exercise code should look like this:</p>
                            <ui-codemirror ui-codemirror-opts="editorOptions"><pre class="brush:jscript;">var OFFSET = 512;
var groveSensor = require('jsupm_grove');
var temp = new groveSensor.GroveTemp(1+OFFSET, 0.66);

function monitor() {
    setInterval(function() {
        var celsius = temp.value();
        var fahrenheit = Math.round(celsius * 9.0 / 5.0 + 32.0);
        console.log(celsius + "° Celsius, or " + fahrenheit + "° Fahrenheit ");
    }, 1000);
}
monitor();</pre></ui-codemirror>

                        </li>

                    </ol>
                </div>

                <div content-block name="repeat-sensor-reading" message="Add the LCD Screen.">
                    <h2 class="labHidden">Add the LCD Screen.</h2>
                    <p>Update <span class="icon file">main.js</span> to output the value from the temperature sensor to the LCD display.</p>

                    <p>Below are the general steps to complete the exercise.</p>

                    <ol>

                        <li>
                            <p>Similar to using <code>require('jsupm_grove')</code> to include the JavaScript UPM library for the basic Grove components, <strong>include the UPM library for I2C-type LCDs</strong>:</p>
                            <p><code>var LCD = require('jsupm_jhd1313m1');</code></p>
                        </li>

                        <li>
                            <p>The specific LCD you have is the <strong>JHD1313M1</strong> Grove RBG LCD. <strong>Instantiate a new <code>LCD.Jhd1313m1</code> object.</strong> The constructor accepts 3 parameters in this order:</p>
                            <dl>
                                <dt>I2C bus (Number)</dt>
                                <dd>For the Intel Edison, <strong>use <code>0</code></strong> with an offset of <strong>use <code>512</code></strong>.</dd>

                                <dt>lcdAddress (Number)</dt>
                                <dd>The JHD1313M1 has two I2C addreses: this address identifies the LCD display. <strong>Use <code>0x3E</code>.</strong></dd>

                                <dt>rgbAddress (Number)</dt>
                                <dd>The JHD1313M1 has two I2C addreses: this address identifies the RGB backlight. <strong>Use <code>0x62</code>.</strong></dd>
                            </dl>
                        </li>

                        <li>
                            <p>To write to the LCD, you need to:</p>
                            <ol style="list-style-type:lower-roman;">
                                <li>First, <strong>set the cursor position</strong>.
                                    <br> e.g. <code>(0,0)</code> for the top left. The JHD1313M1 has 2 rows (y) and 16 columns (x).</li>
                                <li>Then, <strong>write</strong> a string/message to the screen.
                                    <br> e.g. <code>"Temp: " + celsius + "C or " + fahrenheit + "F"</code></li>
                            </ol>
                            <p>The API documentation for generic I2C LCDs can be found here: <a href="http://iotdk.intel.com/docs/master/upm/node/classes/lcd.html#methods" target="_blank">http://iotdk.intel.com/docs/master/upm/node/classes/lcd.html#methods</a></p>
                        </li>

                        <li>
                            <p>As a bonus, you can <strong>change the LCD backlight color</strong>.
                                <br> e.g. <code>(255,255,255)</code> for white.</p>
                            <p>The API documentation for the specific Grove RBG LCD you have can be found here: <a href="http://iotdk.intel.com/docs/master/upm/node/classes/jhd1313m1.html#methods" target="_blank">http://iotdk.intel.com/docs/master/upm/node/classes/jhd1313m1.html#methods</a></p>
                        </li>

                        <li>
                            <p>Use the steps and reference links above to output the value from the temperature sensor to the LCD display.</p>
                        </li>

                        <li>
                            <p>Below is an example of the final solution.</p>
                            <ui-codemirror ui-codemirror-opts="editorOptions"><pre class="brush:jscript;">var OFFSET = 512;
// Include the JavaScript UPM libraries
var groveSensor = require('jsupm_grove');
var LCD = require("jsupm_jhd1313m1"); // Create a new instance of a Grove Temperature Sensor
var temp = new groveSensor.GroveTemp(1+OFFSET, 0.66); // Create a new instance of a Grove RGB LCD screen
var screen = new LCD.Jhd1313m1(0+OFFSET, 0x3E, 0x62);

function monitor() {
    setInterval(function() { // Read the temperature sensor
        var celsius = temp.value();
        var fahrenheit = Math.round(celsius * 9.0 / 5.0 + 32.0);
        console.log(celsius + "° Celsius, or " + fahrenheit + "° Fahrenheit");
        // Update the LCD screen
        screen.setCursor(0, 0);
        screen.setColor(255, 255, 255);
        screen.write("Temp: " + celsius + "C or " + fahrenheit + "F");
    }, 1000);
}
monitor();</pre></ui-codemirror>

                        </li>
                    </ol>
                </div>


                <div content-block name="deploy-temperature-sensor" message="Deploy the temperature sensor application">
                    <h2 class="labHidden">Deploy the temperature sensor application</h2>
                    <p>Build and run your application.</p>

                    <div class="alert alert-success">
                        <p>You should now be seeing the temperature displayed on the LCD.</p>
                    </div>

                </div>
            </div>



        <!--    <div ibox title="Exercise 2: Earthquake Detector">
                <div content-block name="earthquake-sensor-intro" message="Read the introduction to the Earthquake Detector Exercise">
                    <h2 class="labHidden">Read the introduction to the Earthquake Detector Exercise</h2>

                    <p> Create a prototype of an earthquake detection system using a 3-axis accelerometer (I2C) and an LCD display (I2C). Write code for the accelerometer to measure vibration and update the LCD display to warn people of a quake occurring.</p>
                </div>

                <div content-block name="earthquake-sensor-plug-in" message="Plug in the Accelerometer" image-link="./views/labs/sensors-javascript/images/earthquake-detector.jpg">
                    <h2 class="labHidden">Plug in the Accelerometer</h2>
                    <p><img class="labHidden" alt="earthquake detector" data-fid="503918" src="https://software.intel.com/sites/default/files/managed/d6/2d/earthquake-detector.jpg" title="earthquake detector" typeof="foaf:Image"></p>

                    <p>Connect <strong>Grove Accelerometer</strong> to one of the <strong>I2C</strong> pins of the Grove Base Shield.</p>
                    <p>Connect <strong>Grove LCD</strong> display to another <strong>I2C</strong> pin.</p>

                </div>
                <li>
                    <p>In <span class="icon file">main.js</span>, write your code to read values from the accelerometer and detect an earthquake.</p>
                    <p>As a starting point, use the reference links below to view example code for each Grove component in this exercise.</p>
                </li>

                </ol>


                <div id="done-exercise1">

                    <p>
                        Create a prototype of an earthquake detection system using a 3-axis accelerometer (I2C) and an LCD display (I2C). Write code for the accelerometer to measure vibration and update the LCD display to warn people of a quake occurring.
                    </p>

                    <ui-codemirror ui-codemirror-opts="editorOptions"><pre class="brush:jscript;">"use strict";
var accelerometer = require("jsupm_mma7660");
var accel = new accelerometer.MMA7660(0, 76),
    screen = new(require("jsupm_jhd1313m1").Jhd1313m1)(6, 0x3E, 0x62); // enable 64 samples every 10 seconds
accel.setModeStandby();
accel.setSampleRate(10);
accel.setModeActive();

function float() {
    var val = accelerometer.new_floatp(); // define dynamic "getter" for float values:
    function get() {
        return accelerometer.floatp_value(this);
    }
    Object.defineProperty(val,
        "value", {
            get: get
        });
    return val;
}

function warn() {
    screen.setColor(255, 0, 0);
    screen.clear();
    screen.write("Earthquake!");
}

function stop() {
    screen.setColor(255, 255, 255);
    screen.clear();
    screen.write("No Earthquake!");
}

function noAccel() {
    screen.setColor(255, 255, 255);
    screen.clear();
    screen.write("No Accelerometer Detected");
}

function monitor() {
    var x = float(),
        y = float(),
        z = float();
    var prev = false;
    stop();
    setInterval(function() {
        accel.getAcceleration(x, y, z);
        console.log("Values of X Y and z are : " + x.value + " ," + y.value + " ," + z.value);
        if (x.value == 0 && y.value == 0 && z.value == 0) {
            noAccel();
        } else {
            var quake = x.value > 1 || y.value > 1 ||
                z.value > 1;
            if (quake && !prev) {
                warn();
                setTimeout(stop, 15000);
            }
            prev = quake;
        }
    }, 1000);
}

function main() {
    monitor();
}
main();</pre></ui-codemirror>

                </div>
            </div>



            <div ibox title="Exercise 3: Smart Alarm Clock">
                <div content-block name="alarm-intro" message="Read the project introduction">
                    <h2 class="labHidden">Read the project introduction</h2>
                    <p>Create a prototype of a smart alarm clock using a buzzer (Digital), a button (Digital), a rotary angle (Analog), and an LCD display (I2C) with a web server running on the Intel Edison. Set the alarm time using a web page served directly
                        from the Edison itself, using your laptop or mobile phone. When the alarm goes off, the buzzer sounds and the LCD display indicates it’s time to get up. The rotary dial can be used to adjust the brightness of the display.</p>
                </div>

                <div content-block name="alarm-sensors" message="Connect all of the sensors" image-link="./views/labs/sensors-javascript/images/smartalarm.jpg">
                    <h2 class="labHidden">Connect all of the sensors</h2>
                    <p><img class="labHidden" alt="smart alarm" data-fid="503919" src="https://software.intel.com/sites/default/files/managed/dc/aa/smartalarm.jpg" title="smart alarm" typeof="foaf:Image"></p>

                    <ol>
                        <li>
                            <p>Connect <strong>Grove Buzzer</strong> to digital pin <strong>D5</strong> of the Grove Base Shield.</p>
                        </li>
                        <li>
                            <p>Connect <strong>Grove Button</strong> to digital pin <strong>D4</strong>.</p>
                        </li>
                        <li>
                            <p>Connect <strong>Grove LCD</strong> display to any <strong>I2C</strong> pin.</p>
                        </li>
                        <li>
                            <p>Connect <strong>Grove Rotary Angle</strong> to analog pin <strong>A0</strong>.</p>
                        </li>
                    </ol>
                </div>

                <div content-block name="alarm-sensors" message="Code for the alarm clock is completed.">
                    <h2 class="labHidden">Code for the alarm clock is completed.</h2>
                    <li>
                        <p>To start off, write some code for the hardware in <span class="icon file">main.js</span>:</p>
                        <ul>
                            <li>
                                <p>Create and test functions to make the LCD display blink red, and to stop blinking.</p>
                            </li>
                            <li>
                                <p>Create and test functions to start the buzzer buzzing, and to stop the buzzer.</p>
                            </li>
                            <li>
                                <p>Changes in rotary angle should change the brightness of LCD display.</p>
                            </li>
                        </ul>
                    </li>

                    <li>
                        <p>Now, add your server side code in <span class="icon file">main.js</span>:</p>
                        <ul>
                            <li>
                                <p>Create a web server on the Intel Edison using express in NodeJS.</p>
                            </li>
                            <li>
                                <p>Remember to edit your <span class="icon file">package.json</span> to include the <em>express</em>, <em>moment</em>, and <em>superagent</em> npm modules.</p>
                            </li>
                        </ul>
                    </li>

                    <li>
                        <p>Create a new <span class="icon file">index.html</span> file and write your front end code in there.</p>
                        <ul>
                            <li>Create a simple HTML widget to set the time for the alarm clock.</li>
                        </ul>
                    </li>

                    <li>
                        <p>Finally, hook everything up together:</p>
                        <ul>
                            <li>
                                <p>When it’s proper time for alarm to start, LCD display should blink to red and buzzer should start buzzing.</p>
                            </li>
                            <li>
                                <p>When user presses the button: alarm must turn off, LCD must stop blinking, and buzzer should stop buzzing.</p>
                            </li>
                        </ul>
                    </li>

                    </ol>

                </div>
            </div> -->

            <div ibox collapse title="Additional resources">
                <p>Information, community forums, articles, tutorials and more can be found at the <a href="https://software.intel.com/iot">Intel Developer Zone</a>.</p>
                <p>For reference code for any sensor/actuator from the Grove Kit, visit <a href="https://software.intel.com/en-us/iot/hardware/sensors">https://software.intel.com/en-us/iot/hardware/sensors</a></p>

                <h4>Sensors and Actuators APIs - UPM API Doxygen Reference</h4>
                <ul>
                  <li><a href="https://iotdk.intel.com/docs/master/upm/">C++ Sensor/Actuator API libmraa (v1.5.1) and UPM (v1.0.2)</a></li>
                  <li><a href="https://iotdk.intel.com/docs/master/upm/java/">Java Sensor/Actuator API libmraa (v1.5.1) and UPM (v1.0.2)</a></li>
                  <li><a href="https://iotdk.intel.com/docs/master/upm/python/">Python Sensor/Actuator API libmraa (v1.5.1) and UPM (v1.0.2)</a></li>
                  <li><a href="https://iotdk.intel.com/docs/master/upm/node/">NodeJS Sensor/Actuator API libmraa (v1.5.1) and UPM (v1.0.2)</a></li>
                </ul>


                <h4>Information on Sensors and Actuators</h4>
                <ul>
                  <li><a href="http://www.seeedstudio.com/wiki/Grove_-_Temperature_Sensor_V1.2">Seeed Studio Wiki: Grove Temperature Sensor</a></li>
                  <li><a href="http://iotdk.intel.com/docs/master/upm/node/classes/grovetemp.html#methods">UPM API - GroveTemp</a></li>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/c%2B%2B/grovetemp.cxx">UPM C++ example: Grove Temperature Sensor</a></li>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/javascript/grovetemp.js">UPM JavaScript example: Grove Temperature Sensor</a></li>
                </ul>


                <h4>Grove Temperature Sensor</h4>
                <ul>
                  <li><a href="http://www.seeedstudio.com/wiki/Grove_-_Temperature_Sensor_V1.2" >Seeed Studio Wiki: Grove Temperature Sensor</a></li>
                  <li><a href="http://iotdk.intel.com/docs/master/upm/node/classes/grovetemp.html#methods" >UPM API - GroveTemp</a></li>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/c%2B%2B/grovetemp.cxx" >UPM C++ example: Grove Temperature Sensor</a></li>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/javascript/grovetemp.js" >UPM JavaScript example: Grove Temperature Sensor</a></li>
                </ul>

                <h4>Grove LCD RGB Backlight</h4>
                <ul>
                  <li><a href="http://www.seeedstudio.com/wiki/Grove_-_LCD_RGB_Backlight" ``>Seeed Studio Wiki: LCD RGB Backlight</a></li>
                  <li><a href="http://iotdk.intel.com/docs/master/upm/node/classes/lcd.html#methods" >UPM API - i2clcd</a></li>
                  <li><a href="http://iotdk.intel.com/docs/master/upm/node/classes/jhd1313m1.html#methods" >UPM API Doxygen - Jhd1313m1</a></li>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/c%2B%2B/jhd1313m1-lcd.cxx" >UPM API - Jhd1313m1</a></li>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/javascript/jhd1313m1-lcd.js" >C++ example: RGB LCD</a></li>
                </ul>
            <!--
                <h4>Accelerometer</h4>
                <ul>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/c%2B%2B/mma7660.cxx">UPM C++ example: Accelerometer</a></li>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/javascript/mma7660.js">UPM JavaScript example: Accelerometer</a></li>
                  <li><a href="http://www.seeedstudio.com/wiki/Grove_-_3-Axis_Digital_Accelerometer(%C2%B11.5g)">Seeed Studio Wiki: 3-Axis Digital Accelerometer</a></li>
                </ul>

                <h4>Rotary Angle Sensor</h4>
                <ul>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/javascript/groverotary.js">UPM JavaScript example: Rotary Angle Sensor</a></li>
                  <li><a href="http://www.seeedstudio.com/wiki/Grove_-_Rotary_Angle_Sensor">Seeed Studio Wiki: Rotary Angle Sensor</a><li>
                </ul> -->

                <h4>Grove Button</h4>
                <ul>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/javascript/grovebutton.js">UPM JavaScript example: Grove Button</a></li>
                  <li><a href="http://www.seeedstudio.com/wiki/Grove_-_Button">Seeed Studio Wiki: Grove Button</a></li>
                </ul>

                <!-- <h4>Grove Buzzer</h4>
                <ul>
                  <li><a href="https://github.com/intel-iot-devkit/upm/blob/master/examples/javascript/buzzer.js">UPM JavaScript example: Buzzer</a></li>
                  <li><a href="http://www.seeedstudio.com/wiki/Grove_-_Buzzer">Seeed Studio Wiki: Grove Buzzer</a></li>
                </ul> -->
            </div>        </div>
    </div>
  </div>
</div>
